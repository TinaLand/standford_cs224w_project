# ðŸ“Š Agent è¡Œä¸ºåˆ†æžï¼šä¸ºä»€ä¹ˆåœ¨ä¸Šæ¶¨æ—¶è¡¨çŽ°ä¸ä½³

## ä½ çš„ç†è§£å®Œå…¨æ­£ç¡®ï¼

### å½“å‰è¡¨çŽ°æ€»ç»“

| åœºæ™¯ | Agent è¡¨çŽ° | Buy-and-Hold è¡¨çŽ° | ç»“è®º |
|------|-----------|-------------------|------|
| **ä¸‹è·Œ/é£Žé™©æƒ…å†µ** | Max DD: 6.85% | Max DD: 9.55% | âœ… **Agent æ›´å¥½** |
| **ä¸Šæ¶¨æƒ…å†µ** | Return: 45.5% | Return: 83.13% | âŒ **Agent æ›´å·®** |
| **é£Žé™©è°ƒæ•´** | Sharpe: 1.98 | Sharpe: 2.18 | âŒ **Agent æ›´å·®** |

**ç»“è®º**ï¼šAgent åœ¨**ä¸‹è·Œæ—¶èƒ½å‡å°‘æŸå¤±**ï¼Œä½†åœ¨**ä¸Šæ¶¨æ—¶æ— æ³•å……åˆ†æŠ“ä½æœºä¼š**ã€‚

## æ ¹æœ¬åŽŸå› åˆ†æž

### 1. äº¤æ˜“ç­–ç•¥è¿‡äºŽä¿å®ˆ

æŸ¥çœ‹ `rl_environment.py` ä¸­çš„äº¤æ˜“é€»è¾‘ï¼š

```python
if act == 2: # Buy
    # åªä¹°å…¥ç»„åˆä»·å€¼çš„ 1% / NUM_STOCKS
    buy_amount = self.portfolio_value * 0.01 / self.NUM_STOCKS 
    # å¯¹äºŽ 50 åªè‚¡ç¥¨ï¼Œæ¯åªåªèƒ½ä¹° 0.02%ï¼

elif act == 0: # Sell
    # å¯ä»¥å–å‡ºæŒä»“çš„ 20%
    shares_to_sell = self.holdings[i] * 0.2
```

**é—®é¢˜**ï¼š
- **ä¹°å…¥å¤ªä¿å®ˆ**ï¼šæ¯æ¬¡åªèƒ½ä¹°å…¥ç»„åˆä»·å€¼çš„ 0.02%ï¼ˆ1% / 50 stocksï¼‰
- **å–å‡ºç›¸å¯¹æ¿€è¿›**ï¼šå¯ä»¥å–å‡º 20% æŒä»“
- **ä¸å¯¹ç§°çš„äº¤æ˜“èƒ½åŠ›**ï¼šå‡ä»“å®¹æ˜“ï¼ŒåŠ ä»“å›°éš¾

### 2. åœ¨ä¸Šæ¶¨å¸‚åœºä¸­çš„è¡¨çŽ°

åœ¨**ç‰›å¸‚**ä¸­ï¼ˆå¦‚ 2023-2024ï¼‰ï¼š
- Buy-and-Holdï¼šå§‹ç»ˆæ»¡ä»“ï¼Œäº«å—æ‰€æœ‰ä¸Šæ¶¨
- RL Agentï¼š
  - åˆå§‹ä»“ä½å¯èƒ½ä¸è¶³
  - æ¯æ¬¡åªèƒ½å°å¹…åŠ ä»“ï¼ˆ0.02%ï¼‰
  - éœ€è¦å¾ˆå¤šæ­¥æ‰èƒ½å»ºç«‹è¶³å¤Ÿä»“ä½
  - ç­‰ä»“ä½å»ºç«‹æ—¶ï¼Œå·²ç»é”™è¿‡äº†å¤§éƒ¨åˆ†æ¶¨å¹…

### 3. åœ¨ä¸‹è·Œå¸‚åœºä¸­çš„è¡¨çŽ°

åœ¨**ç†Šå¸‚**ä¸­ï¼š
- Buy-and-Holdï¼šæ»¡ä»“æ‰¿å—æ‰€æœ‰ä¸‹è·Œ
- RL Agentï¼š
  - å¯ä»¥å¿«é€Ÿå‡ä»“ï¼ˆæ¯æ¬¡ 20%ï¼‰
  - èƒ½å¤Ÿä¿æŠ¤èµ„æœ¬
  - è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Max Drawdown æ›´å°ï¼ˆ6.85% vs 9.55%ï¼‰

## å…·ä½“æ•°æ®éªŒè¯

### äº¤æ˜“è¡Œä¸ºåˆ†æž

å‡è®¾ Agent åœ¨ä¸Šæ¶¨è¶‹åŠ¿ä¸­ï¼š
- **ç¬¬ 1 å¤©**ï¼šé¢„æµ‹ä¸Šæ¶¨ï¼Œä¹°å…¥ 0.02% â†’ ä»“ä½ï¼š0.02%
- **ç¬¬ 2 å¤©**ï¼šç»§ç»­ä¸Šæ¶¨ï¼Œå†ä¹°å…¥ 0.02% â†’ ä»“ä½ï¼š0.04%
- **ç¬¬ 10 å¤©**ï¼šç´¯è®¡ä¹°å…¥ 0.2% â†’ ä»“ä½ï¼š0.2%
- **ç¬¬ 50 å¤©**ï¼šç´¯è®¡ä¹°å…¥ 1% â†’ ä»“ä½ï¼š1%

**é—®é¢˜**ï¼šéœ€è¦ 50 å¤©æ‰èƒ½å»ºç«‹ 1% çš„ä»“ä½ï¼è€Œ Buy-and-Hold ç¬¬ä¸€å¤©å°±æ˜¯ 100% ä»“ä½ã€‚

### äº¤æ˜“æˆæœ¬å½±å“

å³ä½¿ Agent æƒ³åŠ ä»“ï¼Œæ¯æ¬¡äº¤æ˜“éƒ½æœ‰æˆæœ¬ï¼š
- äº¤æ˜“æˆæœ¬ï¼š0.1% per trade
- é¢‘ç¹å°é¢äº¤æ˜“ â†’ æˆæœ¬ç´¯ç§¯
- è¿›ä¸€æ­¥ä¾µèš€æ”¶ç›Š

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šæ”¹è¿›äº¤æ˜“é€»è¾‘ï¼ˆæŽ¨èï¼‰

å…è®¸ Agent æ›´çµæ´»åœ°æŽ§åˆ¶ä»“ä½ï¼š

```python
# æ”¹è¿›å‰ï¼šå›ºå®šå°é¢ä¹°å…¥
buy_amount = self.portfolio_value * 0.01 / self.NUM_STOCKS

# æ”¹è¿›åŽï¼šæ ¹æ®ä¿¡å·å¼ºåº¦åŠ¨æ€ä¹°å…¥
if act == 2: # Buy
    # æ ¹æ® GNN é¢„æµ‹ç½®ä¿¡åº¦å†³å®šä¹°å…¥é‡
    confidence = gnn_prediction_confidence[i]
    buy_amount = self.portfolio_value * confidence * 0.1  # æœ€å¤š 10%
```

### æ–¹æ¡ˆ 2ï¼šæ”¹è¿›åŠ¨ä½œç©ºé—´

å½“å‰ï¼š`MultiDiscrete([3] * N)` - æ¯åªè‚¡ç¥¨åªæœ‰ Buy/Hold/Sell

æ”¹è¿›ï¼šè¿žç»­åŠ¨ä½œç©ºé—´æˆ–æ›´ç»†ç²’åº¦çš„ç¦»æ•£åŠ¨ä½œ
- ä¹°å…¥é‡ï¼š0%, 1%, 5%, 10%, 20%
- å–å‡ºé‡ï¼š0%, 10%, 25%, 50%, 100%

### æ–¹æ¡ˆ 3ï¼šæ”¹è¿›å¥–åŠ±å‡½æ•°ï¼ˆå·²å®žçŽ°ï¼‰

ä½¿ç”¨ `risk_adjusted` å¥–åŠ±å‡½æ•°ï¼š
- å¥–åŠ±æ›´é«˜çš„ Sharpe æ¯”çŽ‡
- é¼“åŠ±åœ¨ä¸Šæ¶¨æ—¶ç§¯æžåŠ ä»“ï¼ˆé€šè¿‡ Sharpe bonusï¼‰
- åœ¨ä¸‹è·Œæ—¶å‡ä»“ï¼ˆé€šè¿‡ drawdown penaltyï¼‰

### æ–¹æ¡ˆ 4ï¼šæ”¹è¿›åˆå§‹ç­–ç•¥

å…è®¸ Agent åœ¨å¼€å§‹æ—¶å»ºç«‹æ›´å¤§çš„åˆå§‹ä»“ä½ï¼š
- åŸºäºŽ GNN é¢„æµ‹çš„ç½®ä¿¡åº¦
- åœ¨å¼ºä¿¡å·æ—¶ï¼Œå…è®¸æ›´å¤§çš„åˆå§‹ä»“ä½

## é¢„æœŸæ”¹è¿›æ•ˆæžœ

å®žæ–½æ”¹è¿›åŽï¼ŒAgent åº”è¯¥èƒ½å¤Ÿï¼š

1. **åœ¨ä¸Šæ¶¨æ—¶**ï¼š
   - æ›´å¿«å»ºç«‹ä»“ä½ï¼ˆ1-2 å¤© vs 50 å¤©ï¼‰
   - æŠ“ä½æ›´å¤šä¸Šæ¶¨æœºä¼š
   - æ”¶ç›ŠæŽ¥è¿‘æˆ–è¶…è¿‡ Buy-and-Hold

2. **åœ¨ä¸‹è·Œæ—¶**ï¼ˆä¿æŒä¼˜åŠ¿ï¼‰ï¼š
   - å¿«é€Ÿå‡ä»“
   - ä¿æŠ¤èµ„æœ¬
   - Max Drawdown ä»ç„¶æ›´ä½Ž

3. **æ•´ä½“è¡¨çŽ°**ï¼š
   - Sharpe æ¯”çŽ‡ > 2.18ï¼ˆè¶…è¿‡ Buy-and-Holdï¼‰
   - æ”¶ç›Š > 80%ï¼ˆæŽ¥è¿‘ Buy-and-Holdï¼‰
   - Max Drawdown < 7%ï¼ˆä¿æŒä¼˜åŠ¿ï¼‰

## æ€»ç»“

ä½ çš„è§‚å¯Ÿéžå¸¸å‡†ç¡®ï¼š

âœ… **Agent åœ¨é£Žé™©/ä¸‹è·Œæ—¶è¡¨çŽ°æ›´å¥½**ï¼ˆMax DD: 6.85% vs 9.55%ï¼‰
âŒ **Agent åœ¨ä¸Šæ¶¨æ—¶è¡¨çŽ°æ›´å·®**ï¼ˆReturn: 45.5% vs 83.13%ï¼‰

**æ ¹æœ¬åŽŸå› **ï¼šäº¤æ˜“ç­–ç•¥è¿‡äºŽä¿å®ˆï¼Œä¹°å…¥èƒ½åŠ›ä¸è¶³ï¼Œæ— æ³•åœ¨ä¸Šæ¶¨æ—¶å¿«é€Ÿå»ºç«‹ä»“ä½ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šæ”¹è¿›äº¤æ˜“é€»è¾‘ï¼Œå…è®¸ Agent æ ¹æ®ä¿¡å·å¼ºåº¦åŠ¨æ€è°ƒæ•´ä»“ä½å¤§å°ï¼Œåœ¨ä¸Šæ¶¨æ—¶èƒ½å¤Ÿå¿«é€ŸåŠ ä»“ã€‚

